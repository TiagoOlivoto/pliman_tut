<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.80">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>R package {pliman} - Phytopathometry</title>
<style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
<script src="site_libs/quarto-nav/quarto-nav.js"></script><script src="site_libs/quarto-nav/headroom.min.js"></script><script src="site_libs/clipboard/clipboard.min.js"></script><meta name="quarto:offset" content="./">
<script src="site_libs/quarto-search/autocomplete.umd.js"></script><script src="site_libs/quarto-search/fuse.min.js"></script><script src="site_libs/quarto-search/quarto-search.js"></script><link href="./03_analyze.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script><script src="site_libs/quarto-html/popper.min.js"></script><script src="site_libs/quarto-html/tippy.umd.min.js"></script><script src="site_libs/quarto-html/anchor.min.js"></script><link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link class="quarto-color-scheme" href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
<link class="quarto-color-scheme quarto-color-alternate" rel="prefetch" href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css">
<script src="site_libs/bootstrap/bootstrap.min.js"></script><link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link class="quarto-color-scheme" href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<link class="quarto-color-scheme quarto-color-alternate" rel="prefetch" href="site_libs/bootstrap/bootstrap-dark.min.css">
<script id="quarto-search-options" type="application/json">{
    "location": "sidebar",
    "copy-button": false,
    "collapse-after": 2,
    "panel-placement": "start",
    "type": "textbox",
    "limit": 20,
    "language": {
      "search-no-results-text": "No results",
      "search-matching-documents-text": "matching documents",
      "search-copy-link-title": "Copy link to search",
      "search-hide-matches-text": "Hide additional matches",
      "search-more-match-text": "more match in this document",
      "search-more-matches-text": "more matches in this document",
      "search-clear-button-title": "Clear",
      "search-detached-cancel-button-title": "Cancel",
      "search-submit-button-title": "Submit"
    }
  }</script><!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body class="docked">
<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">R package {pliman}</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="./00_about.html">About</a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://www.researchgate.net/profile/Tiago_Olivoto"><i class="bi bi-fab fa-researchgate fa" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/TiagoOlivoto/pliman"><i class="bi bi-bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/tolivoto"><i class="bi bi-bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.mendeley.com/profiles/tiago-olivoto/"><i class="bi bi-fab fa-mendeley fa" role="img">
</i> 
 </a>
  </li>  
</ul>
<div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Phytopathometry</h1>
      <button type="button" class="quarto-btn-toggle btn">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto"><div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_manipulate.html" class="sidebar-item-text sidebar-link">Import and manipulate</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_segment.html" class="sidebar-item-text sidebar-link">Segment objects</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_analyze.html" class="sidebar-item-text sidebar-link">Analyze objects</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_phytopathometry.html" class="sidebar-item-text sidebar-link active">Phytopathometry</a>
  </div>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc"><h2 id="toc-title">In this page</h2>
<ul>
<li><a href="#directory" class="nav-link active" data-scroll-target="#directory"> <span class="header-section-number">1</span> Directory</a></li>
<li><a href="#disease-severity" class="nav-link" data-scroll-target="#disease-severity"> <span class="header-section-number">2</span> Disease severity</a></li>
<li>
<a href="#using-image-indexes" class="nav-link" data-scroll-target="#using-image-indexes"> <span class="header-section-number">3</span> Using image indexes</a>
<ul class="collapse">
<li><a href="#using-sample-palettes" class="nav-link" data-scroll-target="#using-sample-palettes"> <span class="header-section-number">3.1</span> Using sample palettes</a></li>
<li>
<a href="#producing-sample-palettes" class="nav-link" data-scroll-target="#producing-sample-palettes"> <span class="header-section-number">3.2</span> Producing sample palettes</a>
<ul class="collapse">
<li><a href="#defaults-settings" class="nav-link" data-scroll-target="#defaults-settings"> <span class="header-section-number">3.2.1</span> Defaults settings</a></li>
<li><a href="#filling-lesions" class="nav-link" data-scroll-target="#filling-lesions"> <span class="header-section-number">3.2.2</span> Filling lesions</a></li>
<li><a href="#showing-a-mask" class="nav-link" data-scroll-target="#showing-a-mask"> <span class="header-section-number">3.2.3</span> Showing a mask</a></li>
<li><a href="#segmenting-and-analyzing-lesions" class="nav-link" data-scroll-target="#segmenting-and-analyzing-lesions"> <span class="header-section-number">3.2.4</span> Segmenting and analyzing lesions</a></li>
</ul>
</li>
<li><a href="#batch-processing" class="nav-link" data-scroll-target="#batch-processing"> <span class="header-section-number">3.3</span> Batch processing</a></li>
<li><a href="#standard-area-diagrams" class="nav-link" data-scroll-target="#standard-area-diagrams"> <span class="header-section-number">3.4</span> Standard area diagrams</a></li>
<li><a href="#parallel-processing" class="nav-link" data-scroll-target="#parallel-processing"> <span class="header-section-number">3.5</span> Parallel processing</a></li>
<li><a href="#multiple-images-of-the-same-sample" class="nav-link" data-scroll-target="#multiple-images-of-the-same-sample"> <span class="header-section-number">3.6</span> Multiple images of the same sample</a></li>
<li><a href="#multiple-leaves-in-one-image" class="nav-link" data-scroll-target="#multiple-leaves-in-one-image"> <span class="header-section-number">3.7</span> Multiple leaves in one image</a></li>
<li><a href="#a-little-gift" class="nav-link" data-scroll-target="#a-little-gift"> <span class="header-section-number">3.8</span> A little gift</a></li>
</ul>
</li>
</ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title-block d-none d-lg-block"><div><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
<div class="quarto-title"><h1 class="title d-none d-lg-block">Phytopathometry</h1></div></header><section id="directory" class="level1" data-number="1"><h1 data-number="1">
<span class="header-section-number">1</span> Directory</h1>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="st">"E:/Desktop/UFSC/cursos/pliman_tut/imgs"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="disease-severity" class="level1" data-number="2"><h1 data-number="2">
<span class="header-section-number">2</span> Disease severity</h1>
</section><section id="using-image-indexes" class="level1" data-number="3"><h1 data-number="3">
<span class="header-section-number">3</span> Using image indexes</h1>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TiagoOlivoto/pliman">pliman</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stderr">
<pre><code>|==========================================================|</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>| Tools for Plant Image Analysis (pliman 1.2.0)            |</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>| Author: Tiago Olivoto                                    |</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>| Type 'citation('pliman')' to know how to cite pliman     |</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>| Type 'vignette('pliman_start')' for a short tutorial     |</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>| Visit 'http://bit.ly/pkg_pliman' for a complete tutorial |</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>|==========================================================|</code></pre>
</div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_image.html">image_import</a></span><span class="op">(</span><span class="st">"disease.jpeg"</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="04_phytopathometry_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/measure_disease.html">measure_disease</a></span><span class="op">(</span><span class="va">img</span>,</span>
<span>                       index_lb <span class="op">=</span> <span class="st">"B"</span>,</span>
<span>                       index_dh <span class="op">=</span> <span class="st">"HUE2"</span>,</span>
<span>                       invert <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="04_phytopathometry_files/figure-html/unnamed-chunk-3-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">res</span><span class="op">$</span><span class="va">severity</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stdout">
<pre><code>   healthy symptomatic
1 86.94463    13.05537</code></pre>
</div>
</div>
<section id="using-sample-palettes" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="using-sample-palettes">
<span class="header-section-number">3.1</span> Using sample palettes</h2>
<p>Sample palettes can be made by simply manually sampling small areas of representative images and producing a composite image that will represent each of the desired classes (background, healthy, and symptomatic tissues).</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_image.html">image_import</a></span><span class="op">(</span><span class="st">"exemp_1.jpeg"</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">h</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_image.html">image_import</a></span><span class="op">(</span><span class="st">"exem_h.png"</span><span class="op">)</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_image.html">image_import</a></span><span class="op">(</span><span class="st">"exem_d.png"</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_image.html">image_import</a></span><span class="op">(</span><span class="st">"exem_b.png"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/pliman/man/image_combine.html">image_combine</a></span><span class="op">(</span><span class="va">img</span>, <span class="va">h</span>, <span class="va">d</span>, <span class="va">b</span>, ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="04_phytopathometry_files/figure-html/doen%C3%A7a1-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</section><section id="producing-sample-palettes" class="level2" data-number="3.2"><h2 data-number="3.2" class="anchored" data-anchor-id="producing-sample-palettes">
<span class="header-section-number">3.2</span> Producing sample palettes</h2>
<p>Users can produce these palettes with <code><a href="https://rdrr.io/pkg/pliman/man/utils_pick.html">pick_palette()</a></code> function.</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">h2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_pick.html">pick_palette</a></span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span><span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_pick.html">pick_palette</a></span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span><span class="va">b2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_pick.html">pick_palette</a></span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/pliman/man/image_combine.html">image_combine</a></span><span class="op">(</span><span class="va">h2</span>, <span class="va">d2</span>, <span class="va">b2</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="defaults-settings" class="level3" data-number="3.2.1"><h3 data-number="3.2.1" class="anchored" data-anchor-id="defaults-settings">
<span class="header-section-number">3.2.1</span> Defaults settings</h3>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">sev</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/measure_disease.html">measure_disease</a></span><span class="op">(</span>img <span class="op">=</span> <span class="va">img</span>,</span>
<span>                  img_healthy <span class="op">=</span> <span class="va">h</span>,</span>
<span>                  img_symptoms <span class="op">=</span> <span class="va">d</span>,</span>
<span>                  img_background <span class="op">=</span> <span class="va">b</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="04_phytopathometry_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">sev</span><span class="op">$</span><span class="va">severity</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stdout">
<pre><code>   healthy symptomatic
1 92.48196    7.518036</code></pre>
</div>
</div>
</section><section id="filling-lesions" class="level3" data-number="3.2.2"><h3 data-number="3.2.2" class="anchored" data-anchor-id="filling-lesions">
<span class="header-section-number">3.2.2</span> Filling lesions</h3>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">sev</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/measure_disease.html">measure_disease</a></span><span class="op">(</span>img <span class="op">=</span> <span class="va">img</span>,</span>
<span>                  img_healthy <span class="op">=</span> <span class="va">h</span>,</span>
<span>                  img_symptoms <span class="op">=</span> <span class="va">d</span>,</span>
<span>                  img_background <span class="op">=</span> <span class="va">b</span>,</span>
<span>                  show_contour <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="04_phytopathometry_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="showing-a-mask" class="level3" data-number="3.2.3"><h3 data-number="3.2.3" class="anchored" data-anchor-id="showing-a-mask">
<span class="header-section-number">3.2.3</span> Showing a mask</h3>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">sev</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/measure_disease.html">measure_disease</a></span><span class="op">(</span>img <span class="op">=</span> <span class="va">img</span>,</span>
<span>                  img_healthy <span class="op">=</span> <span class="va">h</span>,</span>
<span>                  img_symptoms <span class="op">=</span> <span class="va">d</span>,</span>
<span>                  img_background <span class="op">=</span> <span class="va">b</span>,</span>
<span>                  show_original <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                  col_lesions <span class="op">=</span> <span class="st">"brown"</span><span class="op">)</span> <span class="co"># padrão é "black"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="04_phytopathometry_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="segmenting-and-analyzing-lesions" class="level3" data-number="3.2.4"><h3 data-number="3.2.4" class="anchored" data-anchor-id="segmenting-and-analyzing-lesions">
<span class="header-section-number">3.2.4</span> Segmenting and analyzing lesions</h3>
<p>When using <code>show_features = TRUE</code>, the function analyzes the lesions and returns results such as number of lesions, area, perimeter, etc. With <code>show_segmentation = TRUE</code>, segmented lesions are shown.</p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">sev</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/measure_disease.html">measure_disease</a></span><span class="op">(</span>img <span class="op">=</span> <span class="va">img</span>,</span>
<span>                  img_healthy <span class="op">=</span> <span class="va">h</span>,</span>
<span>                  img_symptoms <span class="op">=</span> <span class="va">d</span>,</span>
<span>                  img_background <span class="op">=</span> <span class="va">b</span>,</span>
<span>                  show_features <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                  show_segmentation <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="04_phytopathometry_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># correct the measures (dpi = 150)</span></span>
<span><span class="va">sev_corrected</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_measures.html">get_measures</a></span><span class="op">(</span><span class="va">sev</span>, dpi <span class="op">=</span> <span class="fl">150</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="batch-processing" class="level2" data-number="3.3"><h2 data-number="3.3" class="anchored" data-anchor-id="batch-processing">
<span class="header-section-number">3.3</span> Batch processing</h2>
<p>To analyze several images from a directory, use the <code>pattern</code> argument to declare a pattern of filenames. Here, we Will used 50 soybean leaves available in the repository https://osf.io/4hbr6, a database of images of annotation of severity of plant diseases. Thanks to <a href="https://osf.io/jb6yd/">Emerson M. Del Ponte</a> and his contributors for keeping this project publicly available. Using the <code>save_image = TRUE</code> argument we save the processed images in a temporary directory, defined by <code><a href="https://rdrr.io/r/base/tempfile.html">tempdir()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># criar um diretório temporário</span></span>
<span><span class="va">temp_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op">(</span></span>
<span>  <span class="va">sev_lote</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/measure_disease.html">measure_disease</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"soy"</span>,</span>
<span>                    img_healthy <span class="op">=</span> <span class="st">"soja_h"</span>,</span>
<span>                    img_symptoms <span class="op">=</span> <span class="st">"soja_s"</span>,</span>
<span>                    img_background <span class="op">=</span> <span class="st">"soja_b"</span>,</span>
<span>                    show_image <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                    save_image <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                    dir_processed <span class="op">=</span> <span class="va">temp_dir</span>,</span>
<span>                    show_contour <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                    col_lesions <span class="op">=</span> <span class="st">"brown"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_1 |=                                        | 2% 00:00:00 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_10 |==                                      | 4% 00:00:02 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_11 |==                                      | 6% 00:00:04 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_12 |===                                     | 8% 00:00:06 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_13 |====                                    | 10% 00:00:07 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_14 |=====                                   | 12% 00:00:09 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_15 |======                                  | 14% 00:00:10 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_16 |======                                  | 16% 00:00:11 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_17 |=======                                 | 18% 00:00:12 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_18 |========                                | 20% 00:00:14 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_19 |=========                               | 22% 00:00:16 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_2 |==========                               | 24% 00:00:17 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_20 |==========                              | 26% 00:00:18 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_21 |===========                             | 28% 00:00:20 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_22 |============                            | 30% 00:00:22 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_23 |=============                           | 32% 00:00:23 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_24 |==============                          | 34% 00:00:23 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_25 |==============                          | 36% 00:00:25 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_26 |===============                         | 38% 00:00:27 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_27 |================                        | 40% 00:00:29 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_28 |=================                       | 42% 00:00:30 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_29 |==================                      | 44% 00:00:32 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_3 |===================                      | 46% 00:00:33 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_30 |===================                     | 48% 00:00:35 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_31 |====================                    | 50% 00:00:36 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_32 |=====================                   | 52% 00:00:36 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_33 |======================                  | 54% 00:00:38 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_34 |======================                  | 56% 00:00:40 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_35 |=======================                 | 58% 00:00:42 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_36 |========================                | 60% 00:00:43 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_37 |=========================               | 62% 00:00:45 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_38 |==========================              | 64% 00:00:46 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_39 |==========================              | 66% 00:00:47 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_4 |============================             | 68% 00:00:49 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_40 |============================            | 70% 00:00:50 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_41 |=============================           | 72% 00:00:51 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_42 |==============================          | 74% 00:00:53 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_43 |==============================          | 76% 00:00:55 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_44 |===============================         | 78% 00:00:56 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_45 |================================        | 80% 00:00:57 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_46 |=================================       | 82% 00:00:59 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_47 |==================================      | 84% 00:01:00 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_48 |==================================      | 86% 00:01:01 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_49 |===================================     | 88% 00:01:02 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_5 |=====================================    | 90% 00:01:03 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_50 |=====================================   | 92% 00:01:05 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_6 |=======================================  | 94% 00:01:06 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_7 |=======================================  | 96% 00:01:07 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_8 |======================================== | 98% 00:01:08 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>Processing image soy_9 |=========================================| 100% 00:01:09 </code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>  usuário   sistema decorrido 
    62.81      8.36     71.20 </code></pre>
</div>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">sev_lote</span><span class="op">$</span><span class="va">severity</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stdout">
<pre><code>      img  healthy symptomatic
1   soy_1 92.30598    7.694025
2  soy_10 53.80360   46.196397
3  soy_11 88.00941   11.990592
4  soy_12 62.49139   37.508612
5  soy_13 51.26833   48.731667
6  soy_14 99.79172    0.208283
7  soy_15 71.62207   28.377926
8  soy_16 30.37714   69.622864
9  soy_17 20.94673   79.053265
10 soy_18 80.94158   19.058422
11 soy_19 38.04735   61.952654
12  soy_2 85.63328   14.366722
13 soy_20 33.00604   66.993959
14 soy_21 33.37444   66.625555
15 soy_22 75.93323   24.066765
16 soy_23 59.91690   40.083099
17 soy_24 72.18240   27.817601
18 soy_25 10.42410   89.575897
19 soy_26 26.35530   73.644700
20 soy_27 30.76558   69.234421
21 soy_28 52.13914   47.860864
22 soy_29 23.45779   76.542208
23  soy_3 15.38918   84.610817
24 soy_30 43.90665   56.093350
25 soy_31 13.50568   86.494320
26 soy_32 46.16725   53.832751
27 soy_33 89.85766   10.142338
28 soy_34 47.03267   52.967327
29 soy_35 58.00870   41.991303
30 soy_36 93.53585    6.464153
31 soy_37 36.80026   63.199742
32 soy_38 52.98365   47.016352
33 soy_39 39.96360   60.036400
34  soy_4 66.48391   33.516086
35 soy_40 68.25036   31.749641
36 soy_41 97.24293    2.757070
37 soy_42 84.55326   15.446743
38 soy_43 92.03686    7.963141
39 soy_44 58.10199   41.898013
40 soy_45 83.62880   16.371200
41 soy_46 83.64167   16.358326
42 soy_47 79.41822   20.581780
43 soy_48 75.42505   24.574951
44 soy_49 70.22985   29.770153
45  soy_5 77.46601   22.533989
46 soy_50 53.19483   46.805165
47  soy_6 64.94720   35.052799
48  soy_7 58.30199   41.698010
49  soy_8 42.05012   57.949881
50  soy_9 81.74081   18.259186</code></pre>
</div>
</div>
</section><section id="standard-area-diagrams" class="level2" data-number="3.4"><h2 data-number="3.4" class="anchored" data-anchor-id="standard-area-diagrams">
<span class="header-section-number">3.4</span> Standard area diagrams</h2>
<p>Standard area diagrams (SAD) have long been used as a tool to aid the estimation of plant disease severity, serving as a standard reference template before or during the assessments.</p>
<p>Given an object computed with <code><a href="https://rdrr.io/pkg/pliman/man/measure_disease.html">measure_disease()</a></code> a Standard Area Diagram (SAD) with <code>n</code> images containing the respective severity values are obtained with <code><a href="https://rdrr.io/pkg/pliman/man/sad.html">sad()</a></code>.</p>
<p>Leaves with the smallest and highest severity will always be in the SAD. If <code>n = 1</code>, the leaf with the smallest severity will be returned. The others are sampled sequentially to achieve the n images after severity has been ordered in ascending order. For example, if there are 30 leaves and n is set to 3, the leaves sampled will be the 1st, 15th, and 30th with the smallest severity values.</p>
<p>The SAD can be only computed if an image pattern name is used in argument <code>pattern</code> of <code><a href="https://rdrr.io/pkg/pliman/man/measure_disease.html">measure_disease()</a></code>. If the images are saved, the <code>n</code> images will be retrevied from <code>dir_processed</code> directory. Otherwise, the severity will be computed again to generate the images. A SAD with 8 images from the above example can be obtained easely with:</p>
<div class="cell">
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/pliman/man/sad.html">sad</a></span><span class="op">(</span><span class="va">sev_lote</span>, n <span class="op">=</span> <span class="fl">6</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="04_phytopathometry_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-stdout">
<pre><code>      img  healthy symptomatic rank
6  soy_14 99.79172    0.208283    1
41 soy_46 83.64167   16.358326   10
44 soy_49 70.22985   29.770153   20
46 soy_50 53.19483   46.805165   30
31 soy_37 36.80026   63.199742   40
18 soy_25 10.42410   89.575897   50</code></pre>
</div>
</div>
</section><section id="parallel-processing" class="level2" data-number="3.5"><h2 data-number="3.5" class="anchored" data-anchor-id="parallel-processing">
<span class="header-section-number">3.5</span> Parallel processing</h2>
<p>To speed up processing time when multiple images are available, you can use the <code>paralell</code> argument. In parallel programming (<code>parallel = TRUE</code>), the images are processed asynchronously (in parallel) in separate R sessions running in the background on the same machine. The number of sections is set by default to 50% of available cores. This number can be controlled explicitly with the argument workers.</p>
<div class="cell">
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op">(</span></span>
<span>  <span class="va">sev_lote</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/measure_disease.html">measure_disease</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"soy"</span>,</span>
<span>                    img_healthy <span class="op">=</span> <span class="st">"soja_h"</span>,</span>
<span>                    img_symptoms <span class="op">=</span> <span class="st">"soja_s"</span>,</span>
<span>                    img_background <span class="op">=</span> <span class="st">"soja_b"</span>,</span>
<span>                    show_image <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                    parallel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stderr">
<pre><code>Image processing using multiple sessions (6). Please wait.</code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>  usuário   sistema decorrido 
     0.69      0.17     25.36 </code></pre>
</div>
</div>
</section><section id="multiple-images-of-the-same-sample" class="level2" data-number="3.6"><h2 data-number="3.6" class="anchored" data-anchor-id="multiple-images-of-the-same-sample">
<span class="header-section-number">3.6</span> Multiple images of the same sample</h2>
<p>If users need to analyze multiple images from the same sample, the images from the same sample must share the same filename prefix, which is defined as the part of the filename that precedes the first hyphen (<code>-</code>) or underscore (<code>_</code>).</p>
<p>In the following example, 16 images will be used as examples. Here, they represent four replicates of four different treatments (<code>TRAT1_1, TRAT1_2, ..., TRAT4_4</code>). Note that to ensure that all images are processed, all images must share a common pattern, in this case (<code>"TRAT"</code>).</p>
<div class="cell">
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op">(</span></span>
<span>  <span class="va">sev_trats</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/measure_disease.html">measure_disease</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"TRAT"</span>,</span>
<span>                    img_healthy <span class="op">=</span> <span class="st">"feijao_h"</span>,</span>
<span>                    img_symptoms <span class="op">=</span> <span class="st">"feijao_s"</span>,</span>
<span>                    img_background <span class="op">=</span> <span class="st">"feijao_b"</span>,</span>
<span>                    show_features <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                    show_image <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                    parallel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stderr">
<pre><code>Image processing using multiple sessions (6). Please wait.</code></pre>
</div>
<div class="cell-output-stdout">
<pre><code>  usuário   sistema decorrido 
     0.50      0.14     17.14 </code></pre>
</div>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">sev</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">sev_trats</span><span class="op">$</span><span class="va">severity</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/separate_col.html">separate_col</a></span><span class="op">(</span><span class="va">img</span>, into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"TRAT"</span>, <span class="st">"REP"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">sev</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">TRAT</span>, <span class="va">symptomatic</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Tratamentos"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Severidade (%)"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="04_phytopathometry_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="multiple-leaves-in-one-image" class="level2" data-number="3.7"><h2 data-number="3.7" class="anchored" data-anchor-id="multiple-leaves-in-one-image">
<span class="header-section-number">3.7</span> Multiple leaves in one image</h2>
<p>When multiple leaves are present in an image, the <code>measure_disease</code> function returns the average severity of the leaves present in the image. To quantify the severity <em>per leaf</em>, the <code><a href="https://rdrr.io/pkg/pliman/man/measure_disease_byl.html">measure_disease_byl()</a></code> function can be used.</p>
<p>This function computes the percentage of symptomatic leaf area using color palettes or RGB indices for each leaf (<code>byl</code>) of an image. This allows, for example, to process replicates of the same treatment and obtain the results of each replication with a single image. To do this, the sample sheets are first split using the <code><a href="https://rdrr.io/pkg/pliman/man/object_split.html">object_split()</a></code> function and then the <code><a href="https://rdrr.io/pkg/pliman/man/measure_disease.html">measure_disease()</a></code> function is applied to the sheet list.</p>
<div class="cell">
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">byl</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/measure_disease_byl.html">measure_disease_byl</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"multiplas"</span>,</span>
<span>                      index <span class="op">=</span> <span class="st">"B"</span>, <span class="co"># used to segment leaves from background</span></span>
<span>                      img_healthy <span class="op">=</span> <span class="st">"soja_h"</span>,</span>
<span>                      img_symptoms <span class="op">=</span> <span class="st">"soja_s"</span>,</span>
<span>                      show_contour <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                      show_features <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                      col_lesions <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>                      parallel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stderr">
<pre><code>Image processing using multiple sessions (6). Please wait.</code></pre>
</div>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">results_byl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_measures.html">get_measures</a></span><span class="op">(</span><span class="va">byl</span><span class="op">)</span></span>
<span></span>
<span><span class="va">results_byl</span><span class="op">$</span><span class="va">results</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stdout">
<pre><code>           img leaf id       x       y area area_ch perimeter radius_mean
1 multiplas_01    1  1 232.000  27.278   36      32    24.142       2.934
2 multiplas_01    1  2 374.250  31.675   40      34    27.728       3.561
3 multiplas_01    1  3 168.704  82.423   71      64    32.385       4.347
4 multiplas_01    1  4 226.286  86.500   14       8     9.828       1.660
5 multiplas_01    1  5 175.529 104.176   34      26    20.485       2.947
6 multiplas_01    1  6 127.667 102.667    3       0     2.414       0.654
  radius_min radius_max radius_sd diam_mean diam_min diam_max major_axis
1      1.640      3.919     0.717     5.867    3.280    7.837      8.105
2      1.755      6.046     1.167     7.122    3.509   12.093     11.317
3      2.756      6.038     0.931     8.693    5.513   12.075     11.936
4      1.300      1.921     0.230     3.321    2.600    3.842      4.209
5      1.232      4.448     0.864     5.893    2.464    8.895      9.329
6      0.471      0.745     0.129     1.308    0.943    1.491      2.309
  minor_axis length width radius_ratio eccentricity  theta solidity convexity
1      6.233  7.505 5.559        2.390        0.598 -1.292    1.125     0.718
2      4.821 10.738 4.484        3.446        0.165  0.436    1.176     0.775
3      7.998 11.651 8.462        2.191        0.500 -1.089    1.109     0.825
4      4.121  3.000 3.000        1.478        0.938  1.571    1.750     1.000
5      4.875  8.546 4.382        3.610        0.297  0.839    1.308     0.914
6      1.333  1.414 0.707        1.581        0.333 -0.785      Inf     1.000
  elongation circularity circularity_haralick circularity_norm   asm   con
1      0.259      16.190                4.093            1.893 0.089 0.883
2      0.582      19.221                3.052            2.309 0.049 4.439
3      0.274      14.771                4.667            1.490 0.130 0.762
4      0.000       6.900                7.224            0.961 0.356 0.361
5      0.487      12.343                3.409            1.421 0.116 3.360
6      0.500       1.943                5.064            0.928 1.000 0.000
    cor   var   idm    sav     sva   sen   ent   dva   den   f12   f13
1 0.651 2.264 0.675 22.107 454.163 0.894 1.165 0.883 0.408 0.195 0.472
2 0.425 4.858 0.493 19.912 367.418 1.033 1.495 4.439 0.702 0.125 0.426
3 0.505 1.769 0.702 22.424 471.542 0.763 1.011 0.762 0.388 0.128 0.359
4 0.126 1.207 0.819 20.583 407.338 0.412 0.521 0.361 0.284 0.013 0.082
5 0.045 2.760 0.551 19.040 337.034 0.782 1.168 3.360 0.631 0.034 0.198
6 0.000 1.000 1.000 18.000 324.000 0.000 0.000 0.000 0.000 0.000 0.000</code></pre>
</div>
</div>
</section><section id="a-little-gift" class="level2" data-number="3.8"><h2 data-number="3.8" class="anchored" data-anchor-id="a-little-gift">
<span class="header-section-number">3.8</span> A little gift</h2>
<div class="cell">
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">f0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_image.html">image_import</a></span><span class="op">(</span><span class="st">"fungo.jpg"</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/analyze_objects.html">analyze_objects</a></span><span class="op">(</span><span class="va">f0</span>,</span>
<span>                  my_index <span class="op">=</span> <span class="st">"(G+B)^3-R"</span>,</span>
<span>                  watershed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                  filter <span class="op">=</span> <span class="fl">30</span>,</span>
<span>                  contour_size <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                  contour_col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">meas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_measures.html">get_measures</a></span><span class="op">(</span><span class="va">res</span>, dpi <span class="op">=</span> <span class="fl">254</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_measures.html">plot_measures</a></span><span class="op">(</span><span class="va">meas</span>,</span>
<span>              col <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>              measure <span class="op">=</span> <span class="st">"diam_mean"</span>,</span>
<span>              size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="04_phytopathometry_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>The segmentation can also be performed using sample palettes representing the foreground and background. In this example, pick the color samples, then use them in the <code><a href="https://rdrr.io/pkg/pliman/man/analyze_objects.html">analyze_objects()</a></code>. ::: {.cell}</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">back</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_pick.html">pick_palette</a></span><span class="op">(</span><span class="va">f0</span><span class="op">)</span></span>
<span><span class="va">fore</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_pick.html">pick_palette</a></span><span class="op">(</span><span class="va">f0</span><span class="op">)</span></span>
<span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/analyze_objects.html">analyze_objects</a></span><span class="op">(</span><span class="va">f0</span>,</span>
<span>                  background <span class="op">=</span> <span class="va">back</span>,</span>
<span>                  foreground <span class="op">=</span> <span class="va">fore</span>,</span>
<span>                  watershed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                  filter <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span>
<span></span>
<span><span class="va">meas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_measures.html">get_measures</a></span><span class="op">(</span><span class="va">res</span>, dpi <span class="op">=</span> <span class="fl">254</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/pliman/man/utils_measures.html">plot_measures</a></span><span class="op">(</span><span class="va">meas</span>,</span>
<span>              col <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>              measure <span class="op">=</span> <span class="st">"diam_mean"</span>,</span>
<span>              size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>:::</p>


<!-- -->
<div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title anchored" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb92" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Phytopathometry"</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="in">```{r include = FALSE}</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_knit<span class="sc">$</span><span class="fu">set</span>(<span class="at">root.dir =</span> <span class="st">"E:/Desktop/UFSC/cursos/pliman_tut/imgs"</span>)</span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a><span class="fu"># Directory</span></span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"E:/Desktop/UFSC/cursos/pliman_tut/imgs"</span>)</span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-14"><a href="#cb92-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-15"><a href="#cb92-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-16"><a href="#cb92-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-17"><a href="#cb92-17" aria-hidden="true" tabindex="-1"></a><span class="fu"># Disease severity</span></span>
<span id="cb92-18"><a href="#cb92-18" aria-hidden="true" tabindex="-1"></a><span class="fu"># Using image indexes</span></span>
<span id="cb92-21"><a href="#cb92-21" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb92-22"><a href="#cb92-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pliman)</span>
<span id="cb92-23"><a href="#cb92-23" aria-hidden="true" tabindex="-1"></a>img <span class="ot">&lt;-</span> <span class="fu">image_import</span>(<span class="st">"disease.jpeg"</span>, <span class="at">plot =</span> <span class="cn">TRUE</span>)</span>
<span id="cb92-24"><a href="#cb92-24" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">measure_disease</span>(img,</span>
<span id="cb92-25"><a href="#cb92-25" aria-hidden="true" tabindex="-1"></a>                       <span class="at">index_lb =</span> <span class="st">"B"</span>,</span>
<span id="cb92-26"><a href="#cb92-26" aria-hidden="true" tabindex="-1"></a>                       <span class="at">index_dh =</span> <span class="st">"HUE2"</span>,</span>
<span id="cb92-27"><a href="#cb92-27" aria-hidden="true" tabindex="-1"></a>                       <span class="at">invert =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>))</span>
<span id="cb92-28"><a href="#cb92-28" aria-hidden="true" tabindex="-1"></a>res<span class="sc">$</span>severity</span>
<span id="cb92-29"><a href="#cb92-29" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-30"><a href="#cb92-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-31"><a href="#cb92-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-32"><a href="#cb92-32" aria-hidden="true" tabindex="-1"></a><span class="fu">## Using sample palettes</span></span>
<span id="cb92-33"><a href="#cb92-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-34"><a href="#cb92-34" aria-hidden="true" tabindex="-1"></a>Sample palettes can be made by simply manually sampling small areas of representative images and producing a composite image that will represent each of the desired classes (background, healthy, and symptomatic tissues). </span>
<span id="cb92-35"><a href="#cb92-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-36"><a href="#cb92-36" aria-hidden="true" tabindex="-1"></a><span class="in">```{r doença1, fig.width = 12, fig.height = 3}</span></span>
<span id="cb92-37"><a href="#cb92-37" aria-hidden="true" tabindex="-1"></a>img <span class="ot">&lt;-</span> <span class="fu">image_import</span>(<span class="st">"exemp_1.jpeg"</span>, <span class="at">plot =</span> <span class="cn">TRUE</span>)</span>
<span id="cb92-38"><a href="#cb92-38" aria-hidden="true" tabindex="-1"></a>h <span class="ot">&lt;-</span> <span class="fu">image_import</span>(<span class="st">"exem_h.png"</span>)</span>
<span id="cb92-39"><a href="#cb92-39" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">image_import</span>(<span class="st">"exem_d.png"</span>)</span>
<span id="cb92-40"><a href="#cb92-40" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">image_import</span>(<span class="st">"exem_b.png"</span>)</span>
<span id="cb92-41"><a href="#cb92-41" aria-hidden="true" tabindex="-1"></a><span class="fu">image_combine</span>(img, h, d, b, <span class="at">ncol =</span> <span class="dv">4</span>)</span>
<span id="cb92-42"><a href="#cb92-42" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-43"><a href="#cb92-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-44"><a href="#cb92-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-45"><a href="#cb92-45" aria-hidden="true" tabindex="-1"></a><span class="fu">## Producing sample palettes</span></span>
<span id="cb92-46"><a href="#cb92-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-47"><a href="#cb92-47" aria-hidden="true" tabindex="-1"></a>Users can produce these palettes with <span class="in">`pick_palette()`</span> function.</span>
<span id="cb92-48"><a href="#cb92-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-49"><a href="#cb92-49" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE, fig.width=10}</span></span>
<span id="cb92-50"><a href="#cb92-50" aria-hidden="true" tabindex="-1"></a>h2 <span class="ot">&lt;-</span> <span class="fu">pick_palette</span>(img)</span>
<span id="cb92-51"><a href="#cb92-51" aria-hidden="true" tabindex="-1"></a>d2 <span class="ot">&lt;-</span> <span class="fu">pick_palette</span>(img)</span>
<span id="cb92-52"><a href="#cb92-52" aria-hidden="true" tabindex="-1"></a>b2 <span class="ot">&lt;-</span> <span class="fu">pick_palette</span>(img)</span>
<span id="cb92-53"><a href="#cb92-53" aria-hidden="true" tabindex="-1"></a><span class="fu">image_combine</span>(h2, d2, b2, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb92-54"><a href="#cb92-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-55"><a href="#cb92-55" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-56"><a href="#cb92-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-57"><a href="#cb92-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-58"><a href="#cb92-58" aria-hidden="true" tabindex="-1"></a><span class="fu">### Defaults settings</span></span>
<span id="cb92-61"><a href="#cb92-61" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb92-62"><a href="#cb92-62" aria-hidden="true" tabindex="-1"></a>sev <span class="ot">&lt;-</span> </span>
<span id="cb92-63"><a href="#cb92-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">measure_disease</span>(<span class="at">img =</span> img,</span>
<span id="cb92-64"><a href="#cb92-64" aria-hidden="true" tabindex="-1"></a>                  <span class="at">img_healthy =</span> h,</span>
<span id="cb92-65"><a href="#cb92-65" aria-hidden="true" tabindex="-1"></a>                  <span class="at">img_symptoms =</span> d,</span>
<span id="cb92-66"><a href="#cb92-66" aria-hidden="true" tabindex="-1"></a>                  <span class="at">img_background =</span> b)</span>
<span id="cb92-67"><a href="#cb92-67" aria-hidden="true" tabindex="-1"></a>sev<span class="sc">$</span>severity</span>
<span id="cb92-68"><a href="#cb92-68" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-69"><a href="#cb92-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-70"><a href="#cb92-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-71"><a href="#cb92-71" aria-hidden="true" tabindex="-1"></a><span class="fu">### Filling lesions</span></span>
<span id="cb92-74"><a href="#cb92-74" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb92-75"><a href="#cb92-75" aria-hidden="true" tabindex="-1"></a>sev <span class="ot">&lt;-</span> </span>
<span id="cb92-76"><a href="#cb92-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">measure_disease</span>(<span class="at">img =</span> img,</span>
<span id="cb92-77"><a href="#cb92-77" aria-hidden="true" tabindex="-1"></a>                  <span class="at">img_healthy =</span> h,</span>
<span id="cb92-78"><a href="#cb92-78" aria-hidden="true" tabindex="-1"></a>                  <span class="at">img_symptoms =</span> d,</span>
<span id="cb92-79"><a href="#cb92-79" aria-hidden="true" tabindex="-1"></a>                  <span class="at">img_background =</span> b,</span>
<span id="cb92-80"><a href="#cb92-80" aria-hidden="true" tabindex="-1"></a>                  <span class="at">show_contour =</span> <span class="cn">FALSE</span>)</span>
<span id="cb92-81"><a href="#cb92-81" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-82"><a href="#cb92-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-83"><a href="#cb92-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-84"><a href="#cb92-84" aria-hidden="true" tabindex="-1"></a><span class="fu">### Showing a mask</span></span>
<span id="cb92-87"><a href="#cb92-87" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb92-88"><a href="#cb92-88" aria-hidden="true" tabindex="-1"></a>sev <span class="ot">&lt;-</span> </span>
<span id="cb92-89"><a href="#cb92-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">measure_disease</span>(<span class="at">img =</span> img,</span>
<span id="cb92-90"><a href="#cb92-90" aria-hidden="true" tabindex="-1"></a>                  <span class="at">img_healthy =</span> h,</span>
<span id="cb92-91"><a href="#cb92-91" aria-hidden="true" tabindex="-1"></a>                  <span class="at">img_symptoms =</span> d,</span>
<span id="cb92-92"><a href="#cb92-92" aria-hidden="true" tabindex="-1"></a>                  <span class="at">img_background =</span> b,</span>
<span id="cb92-93"><a href="#cb92-93" aria-hidden="true" tabindex="-1"></a>                  <span class="at">show_original =</span> <span class="cn">FALSE</span>,</span>
<span id="cb92-94"><a href="#cb92-94" aria-hidden="true" tabindex="-1"></a>                  <span class="at">col_lesions =</span> <span class="st">"brown"</span>) <span class="co"># padrão é "black"</span></span>
<span id="cb92-95"><a href="#cb92-95" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-96"><a href="#cb92-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-97"><a href="#cb92-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-98"><a href="#cb92-98" aria-hidden="true" tabindex="-1"></a><span class="fu">### Segmenting and analyzing lesions</span></span>
<span id="cb92-99"><a href="#cb92-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-100"><a href="#cb92-100" aria-hidden="true" tabindex="-1"></a>When using <span class="in">`show_features = TRUE`</span>, the function analyzes the lesions and returns results such as number of lesions, area, perimeter, etc. With <span class="in">`show_segmentation = TRUE`</span>, segmented lesions are shown.</span>
<span id="cb92-101"><a href="#cb92-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-104"><a href="#cb92-104" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb92-105"><a href="#cb92-105" aria-hidden="true" tabindex="-1"></a>sev <span class="ot">&lt;-</span> </span>
<span id="cb92-106"><a href="#cb92-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">measure_disease</span>(<span class="at">img =</span> img,</span>
<span id="cb92-107"><a href="#cb92-107" aria-hidden="true" tabindex="-1"></a>                  <span class="at">img_healthy =</span> h,</span>
<span id="cb92-108"><a href="#cb92-108" aria-hidden="true" tabindex="-1"></a>                  <span class="at">img_symptoms =</span> d,</span>
<span id="cb92-109"><a href="#cb92-109" aria-hidden="true" tabindex="-1"></a>                  <span class="at">img_background =</span> b,</span>
<span id="cb92-110"><a href="#cb92-110" aria-hidden="true" tabindex="-1"></a>                  <span class="at">show_features =</span> <span class="cn">TRUE</span>,</span>
<span id="cb92-111"><a href="#cb92-111" aria-hidden="true" tabindex="-1"></a>                  <span class="at">show_segmentation =</span> <span class="cn">TRUE</span>)</span>
<span id="cb92-112"><a href="#cb92-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-113"><a href="#cb92-113" aria-hidden="true" tabindex="-1"></a><span class="co"># correct the measures (dpi = 150)</span></span>
<span id="cb92-114"><a href="#cb92-114" aria-hidden="true" tabindex="-1"></a>sev_corrected <span class="ot">&lt;-</span> <span class="fu">get_measures</span>(sev, <span class="at">dpi =</span> <span class="dv">150</span>)</span>
<span id="cb92-115"><a href="#cb92-115" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-116"><a href="#cb92-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-117"><a href="#cb92-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-118"><a href="#cb92-118" aria-hidden="true" tabindex="-1"></a><span class="fu">## Batch processing</span></span>
<span id="cb92-119"><a href="#cb92-119" aria-hidden="true" tabindex="-1"></a>To analyze several images from a directory, use the <span class="in">`pattern`</span> argument to declare a pattern of filenames. Here, we Will used 50 soybean leaves available in the repository https://osf.io/4hbr6, a database of images of annotation of severity of plant diseases. Thanks to <span class="co">[</span><span class="ot">Emerson M. Del Ponte</span><span class="co">](https://osf.io/jb6yd/)</span> and his contributors for keeping this project publicly available. Using the <span class="in">`save_image = TRUE`</span> argument we save the processed images in a temporary directory, defined by <span class="in">`tempdir()`</span>.</span>
<span id="cb92-120"><a href="#cb92-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-123"><a href="#cb92-123" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb92-124"><a href="#cb92-124" aria-hidden="true" tabindex="-1"></a><span class="co"># criar um diretório temporário</span></span>
<span id="cb92-125"><a href="#cb92-125" aria-hidden="true" tabindex="-1"></a>temp_dir <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span>
<span id="cb92-126"><a href="#cb92-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-127"><a href="#cb92-127" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(</span>
<span id="cb92-128"><a href="#cb92-128" aria-hidden="true" tabindex="-1"></a>  sev_lote <span class="ot">&lt;-</span> </span>
<span id="cb92-129"><a href="#cb92-129" aria-hidden="true" tabindex="-1"></a>    <span class="fu">measure_disease</span>(<span class="at">pattern =</span> <span class="st">"soy"</span>,</span>
<span id="cb92-130"><a href="#cb92-130" aria-hidden="true" tabindex="-1"></a>                    <span class="at">img_healthy =</span> <span class="st">"soja_h"</span>,</span>
<span id="cb92-131"><a href="#cb92-131" aria-hidden="true" tabindex="-1"></a>                    <span class="at">img_symptoms =</span> <span class="st">"soja_s"</span>,</span>
<span id="cb92-132"><a href="#cb92-132" aria-hidden="true" tabindex="-1"></a>                    <span class="at">img_background =</span> <span class="st">"soja_b"</span>,</span>
<span id="cb92-133"><a href="#cb92-133" aria-hidden="true" tabindex="-1"></a>                    <span class="at">show_image =</span> <span class="cn">FALSE</span>,</span>
<span id="cb92-134"><a href="#cb92-134" aria-hidden="true" tabindex="-1"></a>                    <span class="at">save_image =</span> <span class="cn">TRUE</span>,</span>
<span id="cb92-135"><a href="#cb92-135" aria-hidden="true" tabindex="-1"></a>                    <span class="at">dir_processed =</span> temp_dir,</span>
<span id="cb92-136"><a href="#cb92-136" aria-hidden="true" tabindex="-1"></a>                    <span class="at">show_contour =</span> <span class="cn">FALSE</span>,</span>
<span id="cb92-137"><a href="#cb92-137" aria-hidden="true" tabindex="-1"></a>                    <span class="at">col_lesions =</span> <span class="st">"brown"</span>)</span>
<span id="cb92-138"><a href="#cb92-138" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb92-139"><a href="#cb92-139" aria-hidden="true" tabindex="-1"></a>sev_lote<span class="sc">$</span>severity</span>
<span id="cb92-140"><a href="#cb92-140" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-141"><a href="#cb92-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-142"><a href="#cb92-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-143"><a href="#cb92-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-144"><a href="#cb92-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-145"><a href="#cb92-145" aria-hidden="true" tabindex="-1"></a><span class="fu">## Standard area diagrams</span></span>
<span id="cb92-146"><a href="#cb92-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-147"><a href="#cb92-147" aria-hidden="true" tabindex="-1"></a>Standard area diagrams (SAD) have long been used as a tool to aid the estimation of plant disease severity, serving as a standard reference template before or during the assessments.</span>
<span id="cb92-148"><a href="#cb92-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-149"><a href="#cb92-149" aria-hidden="true" tabindex="-1"></a>Given an object computed with <span class="in">`measure_disease()`</span> a Standard Area Diagram (SAD) with <span class="in">`n`</span> images containing the respective severity values are obtained with <span class="in">`sad()`</span>.</span>
<span id="cb92-150"><a href="#cb92-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-151"><a href="#cb92-151" aria-hidden="true" tabindex="-1"></a>Leaves with the smallest and highest severity will always be in the SAD. If <span class="in">`n = 1`</span>, the leaf with the smallest severity will be returned. The others are sampled sequentially to achieve the n images after severity has been ordered in ascending order. For example, if there are 30 leaves and n is set to 3, the leaves sampled will be the 1st, 15th, and 30th with the smallest severity values.</span>
<span id="cb92-152"><a href="#cb92-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-153"><a href="#cb92-153" aria-hidden="true" tabindex="-1"></a>The SAD can be only computed if an image pattern name is used in argument <span class="in">`pattern`</span> of <span class="in">`measure_disease()`</span>. If the images are saved, the <span class="in">`n`</span> images will be retrevied from <span class="in">`dir_processed`</span> directory. Otherwise, the severity will be computed again to generate the images. A SAD with 8 images from the above example can be obtained easely with:</span>
<span id="cb92-154"><a href="#cb92-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-157"><a href="#cb92-157" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb92-158"><a href="#cb92-158" aria-hidden="true" tabindex="-1"></a><span class="fu">sad</span>(sev_lote, <span class="at">n =</span> <span class="dv">6</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb92-159"><a href="#cb92-159" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-160"><a href="#cb92-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-161"><a href="#cb92-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-162"><a href="#cb92-162" aria-hidden="true" tabindex="-1"></a><span class="fu">## Parallel processing</span></span>
<span id="cb92-163"><a href="#cb92-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-164"><a href="#cb92-164" aria-hidden="true" tabindex="-1"></a>To speed up processing time when multiple images are available, you can use the <span class="in">`paralell`</span> argument. In parallel programming (<span class="in">`parallel = TRUE`</span>), the images are processed asynchronously (in parallel) in separate R sessions running in the background on the same machine. The number of sections is set by default to 50% of available cores. This number can be controlled explicitly with the argument workers.</span>
<span id="cb92-165"><a href="#cb92-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-168"><a href="#cb92-168" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb92-169"><a href="#cb92-169" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(</span>
<span id="cb92-170"><a href="#cb92-170" aria-hidden="true" tabindex="-1"></a>  sev_lote <span class="ot">&lt;-</span> </span>
<span id="cb92-171"><a href="#cb92-171" aria-hidden="true" tabindex="-1"></a>    <span class="fu">measure_disease</span>(<span class="at">pattern =</span> <span class="st">"soy"</span>,</span>
<span id="cb92-172"><a href="#cb92-172" aria-hidden="true" tabindex="-1"></a>                    <span class="at">img_healthy =</span> <span class="st">"soja_h"</span>,</span>
<span id="cb92-173"><a href="#cb92-173" aria-hidden="true" tabindex="-1"></a>                    <span class="at">img_symptoms =</span> <span class="st">"soja_s"</span>,</span>
<span id="cb92-174"><a href="#cb92-174" aria-hidden="true" tabindex="-1"></a>                    <span class="at">img_background =</span> <span class="st">"soja_b"</span>,</span>
<span id="cb92-175"><a href="#cb92-175" aria-hidden="true" tabindex="-1"></a>                    <span class="at">show_image =</span> <span class="cn">FALSE</span>,</span>
<span id="cb92-176"><a href="#cb92-176" aria-hidden="true" tabindex="-1"></a>                    <span class="at">parallel =</span> <span class="cn">TRUE</span>)</span>
<span id="cb92-177"><a href="#cb92-177" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb92-178"><a href="#cb92-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-179"><a href="#cb92-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-180"><a href="#cb92-180" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-181"><a href="#cb92-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-182"><a href="#cb92-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-183"><a href="#cb92-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-184"><a href="#cb92-184" aria-hidden="true" tabindex="-1"></a><span class="fu">## Multiple images of the same sample</span></span>
<span id="cb92-185"><a href="#cb92-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-186"><a href="#cb92-186" aria-hidden="true" tabindex="-1"></a>If users need to analyze multiple images from the same sample, the images from the same sample must share the same filename prefix, which is defined as the part of the filename that precedes the first hyphen (<span class="in">`-`</span>) or underscore (<span class="in">`_`</span>).</span>
<span id="cb92-187"><a href="#cb92-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-188"><a href="#cb92-188" aria-hidden="true" tabindex="-1"></a>In the following example, 16 images will be used as examples. Here, they represent four replicates of four different treatments (<span class="in">`TRAT1_1, TRAT1_2, ..., TRAT4_4`</span>). Note that to ensure that all images are processed, all images must share a common pattern, in this case (<span class="in">`"TRAT"`</span>).</span>
<span id="cb92-189"><a href="#cb92-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-192"><a href="#cb92-192" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb92-193"><a href="#cb92-193" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(</span>
<span id="cb92-194"><a href="#cb92-194" aria-hidden="true" tabindex="-1"></a>  sev_trats <span class="ot">&lt;-</span> </span>
<span id="cb92-195"><a href="#cb92-195" aria-hidden="true" tabindex="-1"></a>    <span class="fu">measure_disease</span>(<span class="at">pattern =</span> <span class="st">"TRAT"</span>,</span>
<span id="cb92-196"><a href="#cb92-196" aria-hidden="true" tabindex="-1"></a>                    <span class="at">img_healthy =</span> <span class="st">"feijao_h"</span>,</span>
<span id="cb92-197"><a href="#cb92-197" aria-hidden="true" tabindex="-1"></a>                    <span class="at">img_symptoms =</span> <span class="st">"feijao_s"</span>,</span>
<span id="cb92-198"><a href="#cb92-198" aria-hidden="true" tabindex="-1"></a>                    <span class="at">img_background =</span> <span class="st">"feijao_b"</span>,</span>
<span id="cb92-199"><a href="#cb92-199" aria-hidden="true" tabindex="-1"></a>                    <span class="at">show_features =</span> <span class="cn">TRUE</span>,</span>
<span id="cb92-200"><a href="#cb92-200" aria-hidden="true" tabindex="-1"></a>                    <span class="at">show_image =</span> <span class="cn">FALSE</span>,</span>
<span id="cb92-201"><a href="#cb92-201" aria-hidden="true" tabindex="-1"></a>                    <span class="at">parallel =</span> <span class="cn">TRUE</span>)</span>
<span id="cb92-202"><a href="#cb92-202" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb92-203"><a href="#cb92-203" aria-hidden="true" tabindex="-1"></a>sev <span class="ot">&lt;-</span> </span>
<span id="cb92-204"><a href="#cb92-204" aria-hidden="true" tabindex="-1"></a>  sev_trats<span class="sc">$</span>severity <span class="sc">|&gt;</span> </span>
<span id="cb92-205"><a href="#cb92-205" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_col</span>(img, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"TRAT"</span>, <span class="st">"REP"</span>))</span>
<span id="cb92-206"><a href="#cb92-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-207"><a href="#cb92-207" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb92-208"><a href="#cb92-208" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sev, <span class="fu">aes</span>(TRAT, symptomatic))<span class="sc">+</span></span>
<span id="cb92-209"><a href="#cb92-209" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb92-210"><a href="#cb92-210" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb92-211"><a href="#cb92-211" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tratamentos"</span>,</span>
<span id="cb92-212"><a href="#cb92-212" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Severidade (%)"</span>)</span>
<span id="cb92-213"><a href="#cb92-213" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-214"><a href="#cb92-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-215"><a href="#cb92-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-216"><a href="#cb92-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-217"><a href="#cb92-217" aria-hidden="true" tabindex="-1"></a><span class="fu">## Multiple leaves in one image</span></span>
<span id="cb92-218"><a href="#cb92-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-219"><a href="#cb92-219" aria-hidden="true" tabindex="-1"></a>When multiple leaves are present in an image, the <span class="in">`measure_disease`</span> function returns the average severity of the leaves present in the image. To quantify the severity *per leaf*, the <span class="in">`measure_disease_byl()`</span> function can be used.</span>
<span id="cb92-220"><a href="#cb92-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-221"><a href="#cb92-221" aria-hidden="true" tabindex="-1"></a>This function computes the percentage of symptomatic leaf area using color palettes or RGB indices for each leaf (<span class="in">`byl`</span>) of an image. This allows, for example, to process replicates of the same treatment and obtain the results of each replication with a single image. To do this, the sample sheets are first split using the <span class="in">`object_split()`</span> function and then the <span class="in">`measure_disease()`</span> function is applied to the sheet list.</span>
<span id="cb92-222"><a href="#cb92-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-225"><a href="#cb92-225" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb92-226"><a href="#cb92-226" aria-hidden="true" tabindex="-1"></a>byl <span class="ot">&lt;-</span> </span>
<span id="cb92-227"><a href="#cb92-227" aria-hidden="true" tabindex="-1"></a>  <span class="fu">measure_disease_byl</span>(<span class="at">pattern =</span> <span class="st">"multiplas"</span>,</span>
<span id="cb92-228"><a href="#cb92-228" aria-hidden="true" tabindex="-1"></a>                      <span class="at">index =</span> <span class="st">"B"</span>, <span class="co"># used to segment leaves from background</span></span>
<span id="cb92-229"><a href="#cb92-229" aria-hidden="true" tabindex="-1"></a>                      <span class="at">img_healthy =</span> <span class="st">"soja_h"</span>,</span>
<span id="cb92-230"><a href="#cb92-230" aria-hidden="true" tabindex="-1"></a>                      <span class="at">img_symptoms =</span> <span class="st">"soja_s"</span>,</span>
<span id="cb92-231"><a href="#cb92-231" aria-hidden="true" tabindex="-1"></a>                      <span class="at">show_contour =</span> <span class="cn">FALSE</span>,</span>
<span id="cb92-232"><a href="#cb92-232" aria-hidden="true" tabindex="-1"></a>                      <span class="at">show_features =</span> <span class="cn">TRUE</span>,</span>
<span id="cb92-233"><a href="#cb92-233" aria-hidden="true" tabindex="-1"></a>                      <span class="at">col_lesions =</span> <span class="st">"red"</span>,</span>
<span id="cb92-234"><a href="#cb92-234" aria-hidden="true" tabindex="-1"></a>                      <span class="at">parallel =</span> <span class="cn">TRUE</span>)</span>
<span id="cb92-235"><a href="#cb92-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-236"><a href="#cb92-236" aria-hidden="true" tabindex="-1"></a>results_byl <span class="ot">&lt;-</span> <span class="fu">get_measures</span>(byl)</span>
<span id="cb92-237"><a href="#cb92-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-238"><a href="#cb92-238" aria-hidden="true" tabindex="-1"></a>results_byl<span class="sc">$</span>results <span class="sc">|&gt;</span> </span>
<span id="cb92-239"><a href="#cb92-239" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb92-240"><a href="#cb92-240" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-241"><a href="#cb92-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-242"><a href="#cb92-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-243"><a href="#cb92-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-244"><a href="#cb92-244" aria-hidden="true" tabindex="-1"></a><span class="fu">## A little gift</span></span>
<span id="cb92-245"><a href="#cb92-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-248"><a href="#cb92-248" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb92-249"><a href="#cb92-249" aria-hidden="true" tabindex="-1"></a>f0 <span class="ot">&lt;-</span> <span class="fu">image_import</span>(<span class="st">"fungo.jpg"</span>, <span class="at">plot =</span> <span class="cn">TRUE</span>)</span>
<span id="cb92-250"><a href="#cb92-250" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> </span>
<span id="cb92-251"><a href="#cb92-251" aria-hidden="true" tabindex="-1"></a>  <span class="fu">analyze_objects</span>(f0,</span>
<span id="cb92-252"><a href="#cb92-252" aria-hidden="true" tabindex="-1"></a>                  <span class="at">my_index =</span> <span class="st">"(G+B)^3-R"</span>,</span>
<span id="cb92-253"><a href="#cb92-253" aria-hidden="true" tabindex="-1"></a>                  <span class="at">watershed =</span> <span class="cn">FALSE</span>,</span>
<span id="cb92-254"><a href="#cb92-254" aria-hidden="true" tabindex="-1"></a>                  <span class="at">filter =</span> <span class="dv">30</span>,</span>
<span id="cb92-255"><a href="#cb92-255" aria-hidden="true" tabindex="-1"></a>                  <span class="at">contour_size =</span> <span class="dv">3</span>,</span>
<span id="cb92-256"><a href="#cb92-256" aria-hidden="true" tabindex="-1"></a>                  <span class="at">contour_col =</span> <span class="st">"black"</span>)</span>
<span id="cb92-257"><a href="#cb92-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-258"><a href="#cb92-258" aria-hidden="true" tabindex="-1"></a>meas <span class="ot">&lt;-</span> <span class="fu">get_measures</span>(res, <span class="at">dpi =</span> <span class="dv">254</span>)</span>
<span id="cb92-259"><a href="#cb92-259" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_measures</span>(meas,</span>
<span id="cb92-260"><a href="#cb92-260" aria-hidden="true" tabindex="-1"></a>              <span class="at">col =</span> <span class="st">"white"</span>,</span>
<span id="cb92-261"><a href="#cb92-261" aria-hidden="true" tabindex="-1"></a>              <span class="at">measure =</span> <span class="st">"diam_mean"</span>,</span>
<span id="cb92-262"><a href="#cb92-262" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="dv">2</span>)</span>
<span id="cb92-263"><a href="#cb92-263" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-264"><a href="#cb92-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-265"><a href="#cb92-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-266"><a href="#cb92-266" aria-hidden="true" tabindex="-1"></a>:::{.callout-tip}</span>
<span id="cb92-267"><a href="#cb92-267" aria-hidden="true" tabindex="-1"></a>The segmentation can also be performed using sample palettes representing the foreground and background. In this example, pick the color samples, then use them in the <span class="in">`analyze_objects()`</span>.</span>
<span id="cb92-268"><a href="#cb92-268" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb92-269"><a href="#cb92-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-270"><a href="#cb92-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-271"><a href="#cb92-271" aria-hidden="true" tabindex="-1"></a>back <span class="ot">&lt;-</span> <span class="fu">pick_palette</span>(f0)</span>
<span id="cb92-272"><a href="#cb92-272" aria-hidden="true" tabindex="-1"></a>fore <span class="ot">&lt;-</span> <span class="fu">pick_palette</span>(f0)</span>
<span id="cb92-273"><a href="#cb92-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-274"><a href="#cb92-274" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> </span>
<span id="cb92-275"><a href="#cb92-275" aria-hidden="true" tabindex="-1"></a>  <span class="fu">analyze_objects</span>(f0,</span>
<span id="cb92-276"><a href="#cb92-276" aria-hidden="true" tabindex="-1"></a>                  <span class="at">background =</span> back,</span>
<span id="cb92-277"><a href="#cb92-277" aria-hidden="true" tabindex="-1"></a>                  <span class="at">foreground =</span> fore,</span>
<span id="cb92-278"><a href="#cb92-278" aria-hidden="true" tabindex="-1"></a>                  <span class="at">watershed =</span> <span class="cn">FALSE</span>,</span>
<span id="cb92-279"><a href="#cb92-279" aria-hidden="true" tabindex="-1"></a>                  <span class="at">filter =</span> <span class="dv">30</span>)</span>
<span id="cb92-280"><a href="#cb92-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-281"><a href="#cb92-281" aria-hidden="true" tabindex="-1"></a>meas <span class="ot">&lt;-</span> <span class="fu">get_measures</span>(res, <span class="at">dpi =</span> <span class="dv">254</span>)</span>
<span id="cb92-282"><a href="#cb92-282" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_measures</span>(meas,</span>
<span id="cb92-283"><a href="#cb92-283" aria-hidden="true" tabindex="-1"></a>              <span class="at">col =</span> <span class="st">"black"</span>,</span>
<span id="cb92-284"><a href="#cb92-284" aria-hidden="true" tabindex="-1"></a>              <span class="at">measure =</span> <span class="st">"diam_mean"</span>,</span>
<span id="cb92-285"><a href="#cb92-285" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="dv">2</span>)</span>
<span id="cb92-286"><a href="#cb92-286" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb92-287"><a href="#cb92-287" aria-hidden="true" tabindex="-1"></a>:::</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</section></section></main><!-- /main --><script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
    } else {
      disableStylesheet(alternateStylesheets);
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    setTimeout(function() {
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./03_analyze.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Analyze objects</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">A brief tutorial on {pliman} R package</div>   
    <div class="nav-footer-right">Prof.&nbsp;Dr.&nbsp;Tiago Olivoto FIT/CCA/UFSC</div>
  </div>
</footer>


</body></html>